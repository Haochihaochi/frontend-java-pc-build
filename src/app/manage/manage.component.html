<div class="bg-black min-h-screen text-white p-6">

  <!-- Selector Buttons -->
  <div class="flex flex-wrap justify-center gap-4 mb-8">
    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'processor' }"
      (click)="setPart('processor')"
    >
      PROCESSOR
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'motherboard' }"
      (click)="setPart('motherboard')"
    >
      MOTHERBOARD
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'ram' }"
      (click)="setPart('ram')"
    >
      RAM
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'storage' }"
      (click)="setPart('storage')"
    >
      SSD
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'gpu' }"
      (click)="setPart('gpu')"
    >
      GPU
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'psu' }"
      (click)="setPart('psu')"
    >
      PSU
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'casing' }"
      (click)="setPart('casing')"
    >
      CASING
    </button>

    <button
      class="px-5 py-3 rounded-lg text-white font-semibold bg-zinc-700 hover:bg-zinc-600 transition"
      [ngClass]="{ 'bg-zinc-500': selectedPart === 'cooler' }"
      (click)="setPart('cooler')"
    >
      COOLER
    </button>
  </div>

  <!-- Component Display -->
  <div [hidden]="selectedPart !== 'processor'">
    <app-processor></app-processor>
  </div>
  <div [hidden]="selectedPart !== 'casing'">
    <app-casing></app-casing>
  </div>
  <div [hidden]="selectedPart !== 'cooler'">
    <app-cooler></app-cooler>
  </div>
  <div [hidden]="selectedPart !== 'gpu'">
    <app-gpu></app-gpu>
  </div>
  <div [hidden]="selectedPart !== 'psu'">
    <app-psu></app-psu>
  </div>
  <div [hidden]="selectedPart !== 'storage'">
    <app-storage></app-storage>
  </div>
  <div [hidden]="selectedPart !== 'motherboard'">
    <app-motherboard></app-motherboard>
  </div>
  <div [hidden]="selectedPart !== 'ram'">
    <app-ram></app-ram>
  </div>

  <!-- Checkout Button (sticky at bottom, not overlay footer) -->
  <div class="sticky bottom-0 left-0 w-full px-6 py-4">
    <div class="max-w-md mx-auto relative">
      <button
        (click)="toggleCart()"
        class="w-full py-4 rounded-full bg-zinc-900 hover:bg-zinc-800 text-white shadow-lg transition text-sm font-semibold">
        CHECKOUT
      </button>

      <!-- ðŸ”¥ Cart badge -->
      <span *ngIf="totalItems > 0"
            class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow">
        {{ totalItems }}
      </span>
    </div>
  </div>


  <!-- Cart Overlay Modal -->
  <div *ngIf="isOpen" class="fixed inset-0 z-50 bg-black bg-opacity-80 flex justify-center backdrop-blur-sm items-center">
    <div class="bg-zinc-900 text-white p-6 rounded-2xl w-[95%] max-w-md shadow-xl flex flex-col max-h-[90vh]">
      <!-- Header -->
      <div class="flex justify-between items-center border-b border-zinc-700 pb-2 mb-4">
        <h2 class="text-lg font-bold tracking-wide">CART</h2>
        <button (click)="copyToClipboard()" class="text-sm hover:text-gray-300">Copy</button>
      </div>

      

      <!-- Items (scrollable area) -->
      <ul class="flex-1 overflow-y-auto space-y-3 pr-2">
        <li *ngFor="let item of (cart$ | async)" class="bg-zinc-800 rounded-xl p-4 flex flex-col gap-2">
          <!-- Top row: Group + delete -->
          <div class="flex justify-between items-center">
            <span class="font-semibold">{{ item.group }}</span>
            <button (click)="delete(item)" class="text-gray-400 hover:text-red-500 transition">
            <svg xmlns="http://www.w3.org/2000/svg" 
                viewBox="0 0 24 24" 
                fill="currentColor" 
                class="w-5 h-5">
              <path fill-rule="evenodd" 
                    d="M8.586 2.586A2 2 0 0 1 10 2h4a2 2 0 0 1 2 2v2h3a1 1 0 1 1 0 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8a1 1 0 0 1 0-2h3V4a2 2 0 0 1 .586-1.414ZM10 6h4V4h-4v2Zm1 4a1 1 0 1 0-2 0v8a1 1 0 1 0 2 0v-8Zm4 0a1 1 0 1 0-2 0v8a1 1 0 1 0 2 0v-8Z" 
                    clip-rule="evenodd"/>
            </svg>
          </button>
          </div>

          <!-- Description -->
          <div class="text-sm">{{ item.description }}</div>

          <!-- Price -->
          <div class="text-lg text-gray-400">RM {{ item.price }}</div>

          <!-- Quantity Controls -->
          <div class="flex items-center gap-4">
            <button (click)="decrease(item)" class="px-3 py-1 bg-red-600 rounded hover:bg-red-700">-</button>
            <span>{{ item.quantity }}</span>
            <button (click)="increase(item)" class="px-3 py-1 bg-green-600 rounded hover:bg-green-700">+</button>
          </div>
        </li>
      </ul>

      <!-- Footer -->
      <div class="bg-zinc-800 rounded-xl p-4 mt-4 space-y-2 text-sm">
        <div class="flex justify-between">
          <span>Subtotal ({{ totalItems }} items)</span>
          <span>RM {{ subtotal }}</span>
        </div>
        <div class="flex justify-between">
          <span>Discount</span>
          <span class="text-red-400">- RM {{ discount }}</span>
        </div>
        <hr class="border-zinc-700" />
        <div class="flex justify-between font-semibold text-lg">
          <span>Total</span>
          <span>RM {{ total }}</span>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-2 mt-4">
        <button (click)="toggleCart()" class="flex-1 py-3 rounded-lg bg-zinc-700 hover:bg-zinc-600">Cancel</button>
        <button class="flex-1 py-3 rounded-lg bg-green-600 hover:bg-green-500">Order</button>
      </div>
    </div>
  </div>

</div>
